<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Parul University Login</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    height: 100%;
    background: #fff;
    box-sizing: border-box;
  }
  *, *::before, *::after {
    box-sizing: inherit;
  }

  .container {
    display: flex;
    height: 100vh;
    width: 100vw;
  }
  .left {
    flex: 0 0 65%;
    background: url('./images/college.png') no-repeat center center/cover;
  }
  .right {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    background: white;
    padding: 40px 30px;
    min-width: 280px;
    overflow-y: auto;
  }
  .login-form {
    width: 100%;
    max-width: 400px;
  }
  .logo img {
    max-width: 370px;
    width: 100%;
    height: auto;
    object-fit: contain;
    margin-bottom: 25px;
  }
  label {
    font-weight: 500;
    margin-bottom: 5px;
    display: block;
    color: #333;
    font-size: 14px;
  }
  label.required::before {
    content: "* ";
    color: red;
    font-weight: bold;
  }
  input[type="text"],
  input[type="password"] {
    width: 100%;
    padding: 10px 12px;
    margin: 8px 0 15px 0;
    border: 1px solid #ccc;
    border-radius: 3px;
    font-size: 14px;
    box-sizing: border-box;
  }
  .show-password {
    margin-bottom: 20px;
    font-size: 13px;
    display: flex;
    align-items: center;
    cursor: pointer;
  }
  .show-password input {
    margin-right: 6px;
  }
  button {
    padding: 10px 0;
    width: 48%;
    font-size: 15px;
    border-radius: 3px;
    border: none;
    cursor: pointer;
    font-weight: 600;
  }
  .btn-login {
    background-color: #47887e;
    color: white;
    margin-right: 4%;
    transition: background-color 0.3s ease;
  }
  .btn-login:hover {
    background-color: #2a615c;
  }
  .btn-forgot {
    background-color: #d9444b;
    color: white;
    transition: background-color 0.3s ease;
  }
  .btn-forgot:hover {
    background-color: #9a2f31;
  }
  .links {
    margin-top: 15px;
    font-size: 14px;
    text-align: center;
  }
  .links a {
    text-decoration: none;
    color: #1a73e8;
  }
  .links a:hover {
    text-decoration: underline;
  }
  .footer-note {
    margin-top: 20px;
    text-align: center;
    font-size: 12px;
    color: #999;
    font-style: italic;
  }
  .flash-msg {
    text-align: center;
    margin-bottom: 15px;
    font-size: 14px;
    font-weight: 600;
  }

  @media (max-width:480px){
    .left { display:none; }
    button { width:100%; margin-bottom:12px; }
    .btn-login { margin-right:0; }
  }
</style>
</head>
<body>

<div class="container">
  <div class="left"></div>

  <div class="right">
    <form class="login-form" onsubmit="event.preventDefault(); login();">
      <div class="logo">
        <img src="./images/logo.png" alt="Parul University Logo" />
      </div>

      <div id="flashMessage" class="flash-msg"></div>

      <label for="username" class="required">Username/Email</label>
      <input type="text" id="username" placeholder="Enter your username/email" required />

      <label for="password" class="required">Password</label>
      <input type="password" id="password" placeholder="Enter your password" required />

      <label class="show-password">
        <input type="checkbox" id="showPassword" onchange="togglePassword()" /> Show Password
      </label>

      <div style="display:flex; justify-content:space-between; flex-wrap:wrap;">
        <button type="submit" class="btn-login">Login</button>
        <button type="button" class="btn-forgot" onclick="forgotPassword()">Forgot Password</button>
      </div>

      <div class="links">
        Donâ€™t have an account? <a href="signup.html">Signup here</a>
      </div>

      <div class="footer-note">
        Please use Google Chrome for better experience
      </div>
    </form>
  </div>
</div>

<script>
function togglePassword() {
  const pwField = document.getElementById("password");
  pwField.type = document.getElementById("showPassword").checked ? "text" : "password";
}

function login() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const flash = document.getElementById("flashMessage");
  flash.textContent = "";

  if (!username || !password) {
    flash.style.color = "red";
    flash.textContent = "Please enter username and password!";
    return;
  }

  // Get stored signup data array
  const signupUsers = JSON.parse(localStorage.getItem("signupData")) || [];

  // Check if username/email and password match any user
  const user = signupUsers.find(u => (u.email === username || u.mobile === username) && u.password === password);

  if (user) {
    console.log("Login Successful:", user);
    flash.style.color = "green";
    flash.textContent = "Login Successful! Redirecting to homepage...";
    setTimeout(() => {
      window.location.href = "homepage.html";
    }, 500);
  } else {
    flash.style.color = "red";
    flash.textContent = "Invalid username or password!";
    console.log("Login failed for:", { username, password });
  }
}

function forgotPassword() {
  alert("Forgot password clicked!");
}
</script>

</body>
</html>
